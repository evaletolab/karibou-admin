<div tabindex="-1" class="screen-content" ng-controller="AccountCtrl">
  

  <div class="butter-bar active success back" ng-cloak ng-show="user.email.status !== true" >
    <p class="butter-bar-message">
      Vous devez valider votre profile pour finaliser votre inscription.
    </p>
  </div>


  <aside ng-include="'/partials/account/cover.html'" 
         class="cover cover-home img-loaded" 
         ng-class="{'session':user.isAuthenticated()}">
  </aside>


   <section class="wrapper" tabindex="-1">
      <div class="wrapper-inner">



      <!--                               -->
      <!-- NAVIGATION -->
      <!--                               -->                          
      <div  class="bucket post-bucket homepage-posts" ng-include="'/partials/account/navigation.html'"></div>


      <!--                               -->
      <!-- CONTENT                       -->
      <!--                               -->                          


      <form name="form" novalidate="novalidate" class="form-horizontal well well-small">
          <h5 class="article-group-title " >
            Vos données personnelles
          </h5>          


          <!-- NAME FIRSTNAME -->        
          <div class="">
            <div class="form-group ">
              <label>Nom</label>
                <input required ng-model="user.name.givenName" placeholder="Prénom" type="text" name="firstname" class="input-small input-big"/>
                <input required ng-model="user.name.familyName" placeholder="Nom" type="text" name="lastname" class="input-medium input-big"/>
            </div>                

            <!-- PHONES -->        
            <div class="form-group " >
              <label >Téléphone&nbsp;
                <a href="" ng-click="user.phoneNumbers.push({})" 
                     class="small gray offset1"> <i class="icon-plus"></i>Ajouter </a>
              </label>
              <div ng-repeat="phone in user.phoneNumbers">
                <input type="text"  ng-model="user.phoneNumbers[$index].what" placeholder="principale" class="input-small input-big">
                <input type="text"  ng-model="user.phoneNumbers[$index].number" placeholder="022 321.23.24" class="input-medium input-big">
                <a href ng-click="user.phoneNumbers.splice($index, 1)"><i class="icon-remove"></i></a>
              </div>
            </div>

            <!-- EMAIL & VALIDATION -->        
            <div class="form-group ">
              <label>Email</label>
              <div>
                <input id="email" required ng-model="user.email.address" type="email" name="email" class="input-xlarge input-big"/><span ng-hide="form.email.$invalid || EmailError" class="help-inline"><i ng-show="user.email.status == true" class="icon-ok green"></i>
                </span>
                <input type="submit" ng-hide="user.email.status == true" ng-click="verify(user)" value="Valider" ng-disabled="form.$invalid" class="btn btn btn-warning"/>
                
                <p class="help-block">
                </p>
              </div>
            </div>
          </div>

          <!-- ADDRESS -->
          <h5 class="article-group-title " >
              Pour recevoir vos produits, indiqué au moins une adresse de livraison.
          </h5>          

          <!-- ADDRESSES -->

          <div class="" ng-class="{'primary-content':user.addresses[$index].primary}" ng-repeat="address in user.addresses" >
              <a href ng-click="user.addresses.splice($index, 1)" 
              class="pull-right btn btn-small btn-inverse"><i class="icon-remove"></i> </a>


            <h5 class="article-group-title black" >
                Addresse N°{{$index}}# {{user.addresses[$index].name}} 
            </h5>          

            <!-- NOM -->
            <div class="form-group">                  
              <label class="">Nom complet</label>
              <div class="">
                  <input id="full-name"  ng-model="user.addresses[$index].name" type="text" placeholder="ex. {{user.displayName}}"
                  class="input-xlarge input-big" require>
                  <p class="help-block"></p>
                  
              </div>
            </div>

            <!-- NOTE -->
            <div class="form-group">
              <label class="">Note au livreur</label>
              <div class="">
                  <input id="full-name"  ng-model="user.addresses[$index].note" type="text" placeholder="ex. code porte 123456 "
                  class="input-xlarge input-big" require>
              </div>
            </div>

            <!-- RUE/N°/ETAGE -->
            <div class="form-group">
              <label class="">Rue, Numéro</label>
              <div class="">
                  <input id="address-line1" ng-model="user.addresses[$index].streetAdress"  type="text" ng-blur="updateMap(user.addresses[$index],user)" placeholder="ex. Route de Chêne 210" class="input-xlarge input-big" require>
                  <input id="floor1" ng-model="user.addresses[$index].floor" type="text" placeholder="Étage" class="input-mini input-big" require>

              </div>
            </div>

            <!-- COMMUNE -->
            <div class="form-group">
              <label class="">Commune</label>
              <div class="">
                  <select class="input-xlarge input-big" ng-model="user.addresses[$index].location"  
                           data-ng-options="l for l in config.shop.user.location.list" >
                      <option value="">-- Choisissez  --</option>
                  </select>
              </div>
            </div>


            <!-- POSTAL -->
            <div class="form-group">
              <label class="">Code Postal</label>
              <div class="">
                  <input  ng-model="user.addresses[$index].postalCode"  type="text" placeholder="code postal 1200" ng-blur="updateMap(user.addresses[$index],user)"
                  class="input-xlarge input-big" require>
                  <p class="help-block"></p>
              </div> 
            </div>

            <div class="form-group">
              <label for="check-primary">Pricinpale</label>
              <input class="" id="check-primary" type="checkbox"   ng-model="user.addresses[$index].primary" >              
            </div>
          </div>          
          <h5 class="article-group-title " >
            <span class="bucket-header-title">
              Ajouter une addresse de livraison <a  href ng-click="user.addresses.push({primary:true})" class="btn btn-small btn-inverse"><i class="icon-plus"></i></a>
            </span> 
          </h5>          
          <!--     -->
          <!-- MAP -->
          <!--     -->
  <!--             <leaflet center="geneva" legend="legend" event-broadcast="events" 
            defaults="defaults" markers="markers" style="height: 250px; width: 80%">
          </leaflet>        
  -->

          <div class="control-group ">
            <input type="submit" ng-click="save(user)" ng-disabled="form.$invalid || WaitText" value="{{WaitText || 'Enregistrer'}}" class="btn btn-success btn-large"/>
          </div>
      </form>      



      <!-- FOOTER -->              
        <footer class="wrapper-footer" ng-include="'/footer.html'"></footer>

      </section>
   </section>
</div>


