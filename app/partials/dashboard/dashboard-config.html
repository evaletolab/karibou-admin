<div class="dashboard" ng-controller="OrderCommonCtrl">

  <!-- MENU -->
  <nav  class="navbar navbar-inverse navbar-fixed-top" role="navigation"
        ng-include="'/partials/dashboard/dashboard-header.html'"></nav>

  <!-- MAIN CONTENT -->
  <div class="container-fluid " ng-controller="ConfigCtrl">
    <div class="row">

      <!-- LEFT MENU -->
      <div class="col-xs-8 col-sm-4 col-lg-2 sidebar " 
           ng-include="'/partials/dashboard/dashboard-sidebar.html'" 
           ng-class="{'menu-off':!options.showMenu}">
      </div>
      <div class="col-xs-12  nopadding-xs text-center" ng-if="!user.isAdmin()">
      <i class="fa fa-bug fa-7x gray" ></i><br/>
      <div class="gray">rien à déclarer!</div>
      </div>
      <div class="col-xs-12  nopadding-xs" ng-if="user.isAdmin()">

        <!-- CONFIG -->
        <h1 class="page-header">Configuration ({{config.shop.cid}}) </h1>

        <!-- KEYS -->
        <h3 class="page-header">Gateway public key (stripe)</h3>
        <div class="form-group ">                        
            <input type="text" class="form-control input-lg" ng-model="config.shop.keys.pubStripe" />
        </div>

        <h3 class="page-header">Uploadcare public key </h3>
        <div class="form-group ">                        
            <input type="text" class="form-control input-lg" ng-model="config.shop.keys.pubUpcare" />
        </div>

        <h3 class="page-header">Github public key</h3>
        <div class="form-group ">                        
            <input type="text" class="form-control input-lg" ng-model="config.shop.keys.pubGithub" />
        </div>

        <h3 class="page-header">Map public key</h3>
        <div class="form-group ">                        
            <input type="text" class="form-control input-lg" ng-model="config.shop.keys.pubMap" />
        </div>

        <h3 class="page-header">Disqus public key</h3>
        <div class="form-group ">                        
            <input type="text" class="form-control input-lg" ng-model="config.shop.keys.pubDisqus" />
        </div>

        <!-- MAINTENANCE -->
        <h3 class="page-header">Home</h3>
        <div class="form-group ">                        
          <label class="control-label">Afficher les produits préférés
            <input type="checkbox" ng-model="config.shop.home.love">
          </label>
        </div>
        <div class="form-group ">                        
            <input type="text" class="form-control input-lg" ng-model="config.shop.home.path" />
            <p class="help-block">Afficher un bundle</p>
        </div>


      <!-- LE SITE -->
      <div class="clearfix" ng-if="user.isAdmin()">
        <h4 class="page-header"><i class="fa fa-edit gray"></i>&nbsp;<span translate="sitename"></span></h4>
        <div class="form-group ">                        
          <div class="form-group ">                        
              <input type="text" class="form-control input-lg" ng-model="config.shared.home.siteName[locale()]" />
          </div>
        </div>

        <h4 class="page-header"><i class="fa fa-edit gray"></i>&nbsp;<span translate="sitetitle"></span></h4>
        <div class="form-group ">                        
          <div class="form-group ">                        
              <input type="text" class="form-control input-lg" ng-model="config.shared.home.tagLine[locale()]" />
          </div>
        </div>

        <!-- ABOUT -->
        <h4 class="page-header"><i class="fa fa-edit gray"></i>&nbsp;<span translate="siteabout"></span></h4>
        <div class="form-group ">                        
          <div class="">
            <textarea  rows="4" class="form-control input-lg" ng-model="config.shared.home.about[locale()]" placeholder="A propos?"></textarea>            
          </div>
        </div>

        <!-- IMG HOME -->
        <h4 class="page-header"><i class="fa fa-edit gray"></i>&nbsp;Image Home</h4>
        <div class="form-group ">                        
          <div class="" style="width:100%">
            <!-- Photo -->
            <uploadcare-widget
              ng-model="config.shared.home.image"
              data-locale="{{locale()}}"
              data-tabs="file url facebook flickr"
              data-images-only="true"
              data-path-value="true"
              data-preview-step="true"
              data-clearable="true"
              data-multiple="false"
              data-crop="free"
              data-max-size-hide="203600"
              on-upload-error="uploadImageError(error)"
              value="{{config.shared.home.image}}"
             />          
          </div>
        </div>

        <!-- FOOTER -->
        <h4 class="page-header"><i class="fa fa-edit gray"></i>&nbsp;Footer</h4>
        <div class="form-group ">                        
          <div class="">
            <textarea  rows="4" class="form-control input-lg" ng-model="config.shared.home.footer[locale()]" ></textarea>            
          </div>
        </div>

        
        <!-- MAINTENANCE -->
        <h4 class="page-header"><i class="fa fa-edit gray"></i>&nbsp;<span translate="sitemessage"></span></h4>
        <div class="form-group ">                        
          <label class="control-label">Information
            <input type="checkbox" ng-model="config.shared.maintenance.active">
          </label>
          <div class="">
            <textarea  rows="4" class="form-control input-lg" ng-model="config.shared.maintenance.reason[locale()]" placeholder="Pour quelle raison?"></textarea>            
          </div>
        </div>

        <!-- NOSHIPPING -->
        <h3 class="page-header">Interrompre les dates de livraisons suivantes</h3>
        <div class="clearfix" ng-repeat="noshipping in config.shop.noshipping" style="border-bottom:1px dotted #ddd;margin-bottom:5px">
          <div class="col-xs-7 nopadding">
            <input type="text" value="{{noshipping.reason}}" ng-model="config.shop.noshipping[$index].reason[locale()]" placeholder="pour quelle raison?" class="form-control input-lg col-md-10">
          </div>
          <div class="col-xs-2">
            <input type="text" class="form-control input-lg" ng-model="config.shop.noshipping[$index].from" placeholder="jj/mm/aaaa" format-date="DD/MM/YYYY" required />
          </div>           
          <div class="col-xs-2">
            <input type="text" format-date="DD/MM/YYYY" class="form-control input-lg" ng-model="config.shop.noshipping[$index].to" placeholder="jj/mm/aaaa"  required />
          </div>           
          <div class="col-xs-1 nopadding">
            <a class="pull-right btn btn-default btn-lg" href ng-click="config.shop.noshipping.splice($index, 1)"><i class="fa fa-remove"></i></a>
          </div>           
        </div>
        <div class="clearfix">
          <button href ng-click="config.shop.noshipping.push({})" class="btn btn-transparent btn-lg btn-block ">Ajouter une date <i class="fa fa-plus"></i></button>
          <p class="help-block">Spécifier les dates de fermetures et de réouverture</p>
        </div>

        <div>
          <button ng-disabled="form.$invalid||WaitText"  ng-click="saveConfig();"  class="save btn btn-primary btn-lg"  >{{WaitText || 'Enregistrer'}}</button>
        </div>
          

        <!-- WAIT -->
        <div ng-show="loading&&false" class="text-center gray">
          <i class="fa fa-refresh fa-2x fa-spin"></i>
        </div>


      </div>
    </div>
  </div>
</div>
